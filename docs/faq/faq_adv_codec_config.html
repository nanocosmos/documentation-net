<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-faq/faq_adv_codec_config" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Advanced Codec Configuration Questions | nanocosmos Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.nanocosmos.de/img/social-card.jpeg?v=2"><meta data-rh="true" name="twitter:image" content="https://docs.nanocosmos.de/img/social-card.jpeg?v=2"><meta data-rh="true" property="og:url" content="https://docs.nanocosmos.de/docs/faq/faq_adv_codec_config"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="live streaming, video live streaming, streaming, docs, developer docs"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Advanced Codec Configuration Questions | nanocosmos Docs"><meta data-rh="true" name="description" content="Questions Overview"><meta data-rh="true" property="og:description" content="Questions Overview"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.nanocosmos.de/docs/faq/faq_adv_codec_config"><link data-rh="true" rel="alternate" href="https://docs.nanocosmos.de/docs/faq/faq_adv_codec_config" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.nanocosmos.de/docs/faq/faq_adv_codec_config" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="nanocosmos Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="nanocosmos Docs Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-D55K07W445"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-D55K07W445",{anonymize_ip:!0})</script>




<link rel="search" type="application/opensearchdescription+xml" title="nanocosmos Docs" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.812d35d2.css">
<script src="/assets/js/runtime~main.f8d9c25b.js" defer="defer"></script>
<script src="/assets/js/main.3a1259e1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://docs.nanocosmos.de" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logo.svg" alt="nanocosmos Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="nanocosmos Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" sidebarid="nanoStream Cloud" href="/docs/cloud/cloud_overview">nanoStream Cloud</a><a class="navbar__item navbar__link" sidebarid="nanoStream Cloud Dashboard" href="/docs/dashboard/overview">Dashboard</a><a class="navbar__item navbar__link" sidebarid="H5Live Player" href="/docs/nanoplayer/nanoplayer_introduction">H5Live Player</a><a class="navbar__item navbar__link" sidebarid="Webcaster" href="/docs/webrtc/nanostream_webrtc_introduction">Webcaster</a><a class="navbar__item navbar__link" sidebarid="Analytics" href="/docs/cloud/analytics">Analytics</a><a class="navbar__item navbar__link" sidebarid="FAQ" href="/docs/faq">FAQ</a><a class="navbar__item navbar__link" sidebarid="Samples" href="/docs/samples">Samples</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Advanced Codec Configuration Questions</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="questions-overview">Questions Overview<a href="#questions-overview" class="hash-link" aria-label="Direct link to Questions Overview" title="Direct link to Questions Overview">​</a></h2>
<ul>
<li><a href="#how-to-achieve-the-optimal-h264-quality">How to achieve the optimal H.264 quality?</a></li>
<li><a href="#how-do-the-h264-rate-control-mode-and-minimummaximum-quantization-settings-interact">How do the H.264 rate control mode and minimum/maximum quantization settings interact?</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-achieve-the-optimal-h264-quality">How to achieve the optimal H.264 quality?<a href="#how-to-achieve-the-optimal-h264-quality" class="hash-link" aria-label="Direct link to How to achieve the optimal H.264 quality?" title="Direct link to How to achieve the optimal H.264 quality?">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="choosing-appropriate-video-stream-settings">Choosing appropriate video stream settings<a href="#choosing-appropriate-video-stream-settings" class="hash-link" aria-label="Direct link to Choosing appropriate video stream settings" title="Direct link to Choosing appropriate video stream settings">​</a></h4>
<p>First of all the video quality is determined by the relation of video resolution and frame rate and the configured video bitrate. Especially in lower bitrate scenarios it might be indicated to choose a lower resolution and frame rate to get an acceptable video quality.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="improving-quality-through-higher-coding-efficiency">Improving quality through higher coding efficiency<a href="#improving-quality-through-higher-coding-efficiency" class="hash-link" aria-label="Direct link to Improving quality through higher coding efficiency" title="Direct link to Improving quality through higher coding efficiency">​</a></h4>
<p>Nearly all options to increase coding efficiency require additional computation and therefore result in a higher cpu load.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="h264-profile-and-entropy-coding-mode">H.264 profile and entropy coding mode<a href="#h264-profile-and-entropy-coding-mode" class="hash-link" aria-label="Direct link to H.264 profile and entropy coding mode" title="Direct link to H.264 profile and entropy coding mode">​</a></h5>
<p><code>H.264</code> Baseline profile supports a sub-set of H264, like no b-frame and lower complexity encoding modes (CAVLC).
<code>H.264 Main and High profiles</code> in addition provide a more efficient encoding in forms of B-Frames, and entropy coding mode called <code>CABAC</code>. If your application allows to use these profiles, choosing <code>CABAC</code> can significantly increase coding efficiency and quality.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="h264-profile-and-frame-types">H.264 profile and frame types<a href="#h264-profile-and-frame-types" class="hash-link" aria-label="Direct link to H.264 profile and frame types" title="Direct link to H.264 profile and frame types">​</a></h5>
<p><code>H.264 Baseline profile</code> only supports coding <code>frame types I and P</code>.
<code>H.264 Main and High profiles</code> in addition support <code>B frames</code> which allow a much more efficient compression.</p>
<p>The key frame distance also called GOP Size (Group of pictures) determines how many <code>P or B frames</code> are encoded between <code>I/key frames</code>. Commonly used are key frame distances between <code>2 and 5 seconds</code>, at <code>25 frames</code> per second <code>50-250 frames</code>. We recommend 2 seconds.</p>
<p>The <code>P frame distance</code> determines how many <code>B frames</code> are encoded between <code>I and P frames</code>. Commonly used are P frame distances between <code>2 and 4</code>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>p frame distance</div><div class="admonitionContent_BuS1"><p>A P frame distance setting of X may result in <code>X-1 B frames</code> encoded between I and P frames.</p></div></div>
<p><strong>IDR Frame Distance</strong></p>
<p>IDR frames are points in the video stream where a decoder can start instant decoding e.g. after a seek, because the following frames have no references pointing to frames before the IDR frame. This is not necessarily true for “normal” I frames. The IDR frame distance determines how many I frames are encoded between IDR frames.
<code>IDR frame distance 1</code>: Every GOP starts with an IDR frame</p>
<p><code>IDR frame distance 2</code>: Every second GOP starts with an I instead of IDR frame</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>recommendation</div><div class="admonitionContent_BuS1"><p>We recommend using IDR frame distance 1.</p></div></div>
<p><strong>Frame Distance Modes</strong></p>
<p>nanocosmos <code>H.264 Encoder</code> and other encoders support two frame distance modes. This mode determines if <code>H.264 I and P frame distance settings</code> are applied as variable/maximum or fix/constant values. In variable mode the encoder can decide which frame type to use based on how efficient the encoding will be, and e.g. switch from <code>B</code> to <code>I</code> or <code>P</code> on a scene cut. Multiple bitrate streams often require constant frame distances.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>GOP Structure Examples (decoding order)</div><div class="admonitionContent_BuS1"><p>IDR=1, I=5, P=1) <br>
IDR P P P P IDR P P P P IDR P P P P</p><p>IDR=2, I=5, P=1) <br>
IDR P P P P I P P P P IDR P P P P</p><p>IDR=1, I=5, P=2) <br>
IDR P B P B IDR P B P B IDR P B P B</p><p>IDR=1, I=5, P=4) <br>
IDR P B B B IDR P B B B IDR P B B B</p></div></div>
<p><strong>In the N/M notation I=N and P=M.</strong></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="number-of-reference-frames">Number of reference frames<a href="#number-of-reference-frames" class="hash-link" aria-label="Direct link to Number of reference frames" title="Direct link to Number of reference frames">​</a></h5>
<p>During the encoding of P and B frames a defined number of frames is used to find most matching areas and reduce the amount of data needed to encode the difference to it. These frames are called reference frames. A higher number of reference frames will increase the chance to find a better match and result in a higher efficiency. The number of reference frames is not directly related to the GOP structure. Commonly used values are between 1 and 4.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="h264-qualityspeed-setting">H.264 quality/speed setting<a href="#h264-qualityspeed-setting" class="hash-link" aria-label="Direct link to H.264 quality/speed setting" title="Direct link to H.264 quality/speed setting">​</a></h5>
<p>The H.264 quality/speed setting is implicitely controlling advanced H.264 encoding parameters like block types, search range and search algorithms used. The goal is to provide an easy to use parameter allowing to balance video quality and performance, to not overload the encoder machine CPU.</p>
<p>Dependent on the encoder vendor and brand, there are different configurations available.</p>
<p>For open-source based encoders like ffmpeg and OBS, the quality/speed tradeoff setting is called preset and as options like ultrafast, veryfast, fast, slow. We recommend &quot;veryfast&quot;.</p>
<p>For nanoStream Encoders, the parameter range is from 0 (maximum speed) to 6 (maximum quality). nanoStream API is using the value 3 (balanced) as a default.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example for SD video with limiting factor bandwidth</div><div class="admonitionContent_BuS1"><ul>
<li>H264Profile: Main</li>
<li>H264Level: 30</li>
<li>H264IFrameDistance: 50-100</li>
<li>H264PFrameDistance: 1 (low latency)</li>
<li>H264VlcMode: CABAC</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Example for HD video with limiting factor performance</div><div class="admonitionContent_BuS1"><ul>
<li>H264Profile: Baseline or High</li>
<li>H264Level: 31</li>
<li>H264IFrameDistance: 50-100</li>
<li>H264PFrameDistance: 1 (low latency)</li>
<li>H264VlcMode: CAVLC</li>
</ul></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="deblocking-filter">Deblocking Filter<a href="#deblocking-filter" class="hash-link" aria-label="Direct link to Deblocking Filter" title="Direct link to Deblocking Filter">​</a></h5>
<p>The H.264 Deblocking Filter is an important tool to reduce annoying blocking artefacts by video filtering. It is working on the encoding and decoding path. nanoStream API and DirectShow encoder have the deblocking filter enabled with values <code>alpha: 2</code> , <code>beta: 2</code> by default.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-do-the-h264-rate-control-mode-and-minimummaximum-quantization-settings-interact">How do the H.264 rate control mode and minimum/maximum quantization settings interact?<a href="#how-do-the-h264-rate-control-mode-and-minimummaximum-quantization-settings-interact" class="hash-link" aria-label="Direct link to How do the H.264 rate control mode and minimum/maximum quantization settings interact?" title="Direct link to How do the H.264 rate control mode and minimum/maximum quantization settings interact?">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="rate-control-mode">Rate Control Mode<a href="#rate-control-mode" class="hash-link" aria-label="Direct link to Rate Control Mode" title="Direct link to Rate Control Mode">​</a></h4>
<p>The Rate Control Mode determines the strictness/tolerance that is used by the bitrate control.</p>
<ul>
<li>Constant bitrate (CBR) is trying to keep the bitrate constant over time</li>
<li>Variable bitrate (VBR) will allow variations of the bitrate dependent on the content complexity</li>
</ul>
<p>There is a range of options between strict CBR and VBR, as both options have tradeoffs.
CBR is usually used in live streaming, as any network as limits of possible bandwidth.
VBR us more used in live recording and VOD playback, as this can use larger buffers to allow bandwidth variations.
Some encoders have options like ABR (average bitrate)
We recommend using CBR for live streaming.</p>
<p><code>CBR Strict 1</code> is the most strict setting. Tolerance is increasing from <code>Constant Bitrate </code>(CBR) to <code>Average Bitrate</code> (ABR) to <code>Variable Bitrate</code> (VBR). nanoStream API is using the CBR Stream setting as a default.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Values</div><div class="admonitionContent_BuS1"><p>0 = Auto (CBR Stream)
1 = CBR Strict 1
2 = CBR Strict 2
3 = CBR Stream
4 = ABR 1
5 = ABR 2
6 = VBR</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>recommendation</div><div class="admonitionContent_BuS1"><p><code>CBR Stream</code> is recommended for most streaming applications and is the default mode.
<code>VBR</code> is recommended for local file recording and fast video scene changes and transitions.</p></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="minimum-and-maximum-quantization">Minimum and Maximum Quantization<a href="#minimum-and-maximum-quantization" class="hash-link" aria-label="Direct link to Minimum and Maximum Quantization" title="Direct link to Minimum and Maximum Quantization">​</a></h5>
<p>The bitrate is controlled through the quantization value that is adjusted for every frame according to the configured bitrate and settings for minimum and maximum quantization. By default nanoStream is calculating a suitable minimum quantization for the configured resolution, framerate and bitrate. So in most cases there is no need to override this setting normally. Setting up a minimum quantization helps the bitrate control to avoid overruns especially when changing back from static scenes with low complexity to scenes with higher complexity. The minimum quantization can be configured with the option <code>&#x27;H264MinimumQuant&#x27;</code>. <code>0=auto(1)</code>, <code>1-51 = custom value</code> Setting an explicit value (1) will decrease the bitrate drop during static scenes, but might increase short term bitrate overrun when changing back to more complex scenes.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-07-18T14:02:56.000Z" itemprop="dateModified">Jul 18, 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#questions-overview" class="table-of-contents__link toc-highlight">Questions Overview</a></li><li><a href="#how-to-achieve-the-optimal-h264-quality" class="table-of-contents__link toc-highlight">How to achieve the optimal H.264 quality?</a></li><li><a href="#how-do-the-h264-rate-control-mode-and-minimummaximum-quantization-settings-interact" class="table-of-contents__link toc-highlight">How do the H.264 rate control mode and minimum/maximum quantization settings interact?</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">nanoStream Cloud</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://dashboard.nanostream.cloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dashboard<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://info.nanocosmos.de/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Overview<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://info.nanocosmos.de/interactivelivestreaming/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Use Cases<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.nanocosmos.de/buy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Pricing<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://info.nanocosmos.de/free-trial/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Free Trial<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.nanocosmos.de/blog/jobs/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Career<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.nanocosmos.de/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/nanocosmos/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/nanocosmos-gmbh/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.instagram.com/nanovideo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@nanocosmos" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://info.nanocosmos.de/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.nanocosmos.de/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.nanocosmos.de/support" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.nanocosmos.de/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.nanocosmos.de/" target="_self" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/nanostream.png" alt="nanocosmos Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="160"><img src="/img/nanostream.png" alt="nanocosmos Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="160"></a></div><div class="footer__copyright">Copyright © 2025. nanocosmos GmbH</div></div></div></footer></div>
</body>
</html>