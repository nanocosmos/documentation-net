"use strict";(self.webpackChunknanocosomos_documentation=self.webpackChunknanocosomos_documentation||[]).push([[295],{28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var i=t(96540);const o={},a=i.createContext(o);function r(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(a.Provider,{value:n},e.children)}},35414:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>s});const i=JSON.parse('{"id":"nanoplayer/nanoplayer_feature_reconnect_timeouts","title":"Reconnect and Timeouts","description":"Reconnect on unexpected connection close","source":"@site/docs/nanoplayer/nanoplayer_feature_reconnect_timeouts.md","sourceDirName":"nanoplayer","slug":"/nanoplayer/nanoplayer_feature_reconnect_timeouts","permalink":"/docs/nanoplayer/nanoplayer_feature_reconnect_timeouts","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1751618628000,"frontMatter":{"id":"nanoplayer_feature_reconnect_timeouts","title":"Reconnect and Timeouts","sidebar_label":"Reconnect and Timeouts"},"sidebar":"H5Live Player","previous":{"title":"UI and customization","permalink":"/docs/nanoplayer/nanoplayer_feature_customization"},"next":{"title":"Media Error Recovery","permalink":"/docs/nanoplayer/nanoplayer_feature_media_error_recovery"}}');var o=t(74848),a=t(28453);const r={id:"nanoplayer_feature_reconnect_timeouts",title:"Reconnect and Timeouts",sidebar_label:"Reconnect and Timeouts"},c=void 0,l={},s=[{value:"Reconnect on unexpected connection close",id:"reconnect-on-unexpected-connection-close",level:2},{value:"Configuration",id:"reconnect-configuration",level:3},{value:"Example",id:"example",level:3},{value:"Timeouts",id:"timeouts",level:2},{value:"Connection timeout",id:"connection-timeout",level:3},{value:"Loading timeout",id:"loading-timeout",level:3},{value:"Buffering timeout",id:"buffering-timeout",level:3},{value:"Example",id:"example-1",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"reconnect-on-unexpected-connection-close",children:"Reconnect on unexpected connection close"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.strong,{children:"nanoStream H5Live Player"})," can use an internal reconnect in case the network connection is broke up."]}),"\n",(0,o.jsxs)(n.p,{children:["Internal network reconnect is ",(0,o.jsx)(n.strong,{children:"supported on all platforms except iOS"}),". iOS media stream connections cannot be managed by the player, but by the browser and system.\nFor the supported platforms automatic network reconnect is handling two main cases:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Initial connect failing"}),"\n",(0,o.jsx)(n.li,{children:"Connection break up during streaming"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["The handling is optional and can be disabled. The reconnect is enabled by default with a suggested ",(0,o.jsx)(n.a,{href:"#reconnect-configuration",children:"configuration"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["During a reconnect no ",(0,o.jsx)(n.a,{href:"./nanoplayer_api#NanoPlayer..event_onError",children:(0,o.jsx)(n.code,{children:"onError"})})," event is being fired.\nThe reconnect will be notified by an ",(0,o.jsx)(n.a,{href:"./nanoplayer_api/#NanoPlayer..event_onPause",children:(0,o.jsx)(n.code,{children:"onPause"})})," event with ",(0,o.jsx)(n.a,{href:"./nanoplayer_api/#NanoPlayer..pausereason",children:(0,o.jsx)(n.code,{children:"reason"})})," 'reconnectionimminent'."]}),"\n",(0,o.jsxs)(n.p,{children:["If the number of maximum consecutive reconnect attemps is exceeded,\nthe player will fire an ",(0,o.jsx)(n.a,{href:"./nanoplayer_api/#NanoPlayer..event_onError",children:(0,o.jsx)(n.code,{children:"onError"})})," event with the related ",(0,o.jsx)(n.a,{href:"./nanoplayer_api/#NanoPlayer..errorcode",children:(0,o.jsx)(n.code,{children:"errorcode"})})," followed by an ",(0,o.jsx)(n.a,{href:"./nanoplayer_api/#NanoPlayer..event_onPause",children:(0,o.jsx)(n.code,{children:"onPause"})})," event."]}),"\n",(0,o.jsx)(n.admonition,{title:"Important",type:"danger",children:(0,o.jsxs)(n.p,{children:["The internal reconnect handles network connection break up only! It doesn't handle non network related stream break ups or pause reasons different then ",(0,o.jsx)(n.code,{children:"normal"}),"."]})}),"\n",(0,o.jsx)(n.admonition,{title:"Important",type:"caution",children:(0,o.jsx)(n.p,{children:"Reconnect is not supported on iOS!"})}),"\n",(0,o.jsx)(n.h3,{id:"reconnect-configuration",children:"Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["The internal reconnect behaviour can be configured via ",(0,o.jsx)(n.code,{children:"config.playback.reconnect"})," object during the initial ",(0,o.jsx)(n.code,{children:"setup"})," call."]}),"\n",(0,o.jsx)(n.admonition,{title:"note",type:"info",children:(0,o.jsxs)(n.p,{children:["You can find more information on how to configure the player in our ",(0,o.jsx)(n.a,{href:"./nanoplayer_api/#NanoPlayer..config",children:"API documentation"}),"."]})}),"\n",(0,o.jsx)(n.p,{children:"The reconnect object has multiple parameters to adjust the behaviour. The parameters are:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"minDelay"})," (default: 2) - The minimum time between reconnect attempts in seconds. The lowest possible value is 1 sec."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"maxDelay"})," (default: 10) - The maximum time between reconnect attempts in seconds."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"delaySteps"})," (default: 10) - The number of steps till the maximum delay should reached."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"maxRetries"})," (default: 10) - The maximum count of reconnect tries. If set to zero no reconnect will be done."]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{title:"note",type:"info",children:(0,o.jsxs)(n.p,{children:["Disable reconnect by setting ",(0,o.jsx)(n.code,{children:"maxRetries"})," to 0."]})}),"\n",(0,o.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'var config = {\n    "source": {\n        ...\n    },\n    "playback" : {\n        ...,\n        "reconnect" : {\n            "minDelay"   : 2,\n            "maxDelay"   : 10,\n            "delaySteps" : 10,\n            "maxRetries" : 10\n        }\n    },\n    "style" : {\n        ...\n    }\n};\n'})}),"\n",(0,o.jsx)(n.h2,{id:"timeouts",children:"Timeouts"}),"\n",(0,o.jsx)(n.admonition,{title:"Important",type:"caution",children:(0,o.jsx)(n.p,{children:"Applying custom timeout values should be handled with care."})}),"\n",(0,o.jsxs)(n.p,{children:["In case of a timeout, an ",(0,o.jsx)(n.a,{href:"./nanoplayer_api/#NanoPlayer..event_onError",children:(0,o.jsx)(n.code,{children:"onError"})})," event is fired with a related ",(0,o.jsx)(n.a,{href:"./nanoplayer_api#NanoPlayer..errorcode",children:(0,o.jsx)(n.code,{children:"errorcode"})}),", followed by an ",(0,o.jsx)(n.a,{href:"./nanoplayer_api/#NanoPlayer..event_onPause",children:(0,o.jsx)(n.code,{children:"onPause"})})," event."]}),"\n",(0,o.jsx)(n.p,{children:"Timeouts will be terminated by player state changes like playback starting / resuming or a externally triggered pause."}),"\n",(0,o.jsx)(n.h3,{id:"connection-timeout",children:"Connection timeout"}),"\n",(0,o.jsxs)(n.p,{children:["The connection time is the time between opening the connection and having it established. Is the connection established, the timeout will be cleared. The connection time is part of the ",(0,o.jsx)(n.code,{children:"LOADING"})," phase."]}),"\n",(0,o.jsxs)(n.p,{children:["The default value for ",(0,o.jsx)(n.code,{children:"playback.timeouts.connecting"})," is ",(0,o.jsx)(n.strong,{children:"5 seconds"}),".\nIt can be changed to a value within a range (in seconds):"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"min: 5"}),"\n",(0,o.jsx)(n.li,{children:"max: 30"}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{title:"Note",type:"caution",children:(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.strong,{children:"connection timeout"})," value should ",(0,o.jsx)(n.strong,{children:"not"})," be ",(0,o.jsx)(n.strong,{children:"higher than"})," the ",(0,o.jsx)(n.strong,{children:"loading timeout"})," value."]})}),"\n",(0,o.jsxs)(n.p,{children:["In case the connection timeout is expired, the player state is changing from ",(0,o.jsx)(n.code,{children:"LOADING"})," to ",(0,o.jsx)(n.code,{children:"PAUSED"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"loading-timeout",children:"Loading timeout"}),"\n",(0,o.jsxs)(n.p,{children:["The loading time starts with a ",(0,o.jsx)(n.code,{children:"play"})," call and includes the time it takes to establish the connection (",(0,o.jsx)(n.code,{children:"playback.timeouts.connecting"}),") and receiving media data over the connection until the playback has started successfully. Related events are ",(0,o.jsx)(n.a,{href:"./nanoplayer_api/#NanoPlayer..event_onLoading",children:(0,o.jsx)(n.code,{children:"onLoading"})})," and ",(0,o.jsx)(n.a,{href:"./nanoplayer_api/#NanoPlayer..event_onPlay",children:(0,o.jsx)(n.code,{children:"onPlay"})}),". The timeout will be cleared if the ",(0,o.jsx)(n.code,{children:"PLAYING"})," state has been entered indecated by the ",(0,o.jsx)(n.a,{href:"./nanoplayer_api/#NanoPlayer..event_onPlay",children:(0,o.jsx)(n.code,{children:"onPlay"})})," event."]}),"\n",(0,o.jsxs)(n.p,{children:["The default value for ",(0,o.jsx)(n.code,{children:"playback.timeouts.loading"})," is ",(0,o.jsx)(n.strong,{children:"20 seconds"}),".\nIt can be changed to a value within a range (in seconds):"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"min: 10"}),"\n",(0,o.jsx)(n.li,{children:"max: 60"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["In case the loading timeout is expired, the player state is changing from ",(0,o.jsx)(n.code,{children:"LOADING"})," to ",(0,o.jsx)(n.code,{children:"PAUSED"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"buffering-timeout",children:"Buffering timeout"}),"\n",(0,o.jsxs)(n.p,{children:["The buffering time starts if the player state changes from ",(0,o.jsx)(n.code,{children:"PLAYING"})," to ",(0,o.jsx)(n.code,{children:"BUFFERING"})," in case not enough media data for playback is being received. Related events are ",(0,o.jsx)(n.a,{href:"./nanoplayer_api/#NanoPlayer..event_onStartBuffering",children:(0,o.jsx)(n.code,{children:"onStartBuffering"})})," and ",(0,o.jsx)(n.a,{href:"./nanoplayer_api/#NanoPlayer..event_onStopBuffering",children:(0,o.jsx)(n.code,{children:"onStopBuffering"})}),". The timeout will be cleared if the playback resumes indecated by the ",(0,o.jsx)(n.a,{href:"./nanoplayer_api/#NanoPlayer..event_onStopBuffering",children:(0,o.jsx)(n.code,{children:"onStopBuffering"})})," event."]}),"\n",(0,o.jsxs)(n.p,{children:["The default value for ",(0,o.jsx)(n.code,{children:"playback.timeouts.buffering"})," is ",(0,o.jsx)(n.strong,{children:"20 seconds"}),".\nIt can be changed to a value within a range (in seconds):"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"min: 10"}),"\n",(0,o.jsx)(n.li,{children:"max: 60"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["In case the buffering timeout is expired, the player state is changing from ",(0,o.jsx)(n.code,{children:"BUFFERING"})," to ",(0,o.jsx)(n.code,{children:"PAUSED"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"example-1",children:"Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'// with default values:\nvar config = {\n    "source": {\n        ...\n    },\n    "playback" : {\n        ...,\n        "timeouts" : {\n            "connecting" : 5,\n            "loading"    : 20,\n            "buffering"  : 20\n        }\n    },\n    "style" : {\n        ...\n    }\n};\n'})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);