"use strict";(self.webpackChunknanocosomos_documentation=self.webpackChunknanocosomos_documentation||[]).push([[9301],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(96540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}},37398:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"webrtc/nanostream_webrtc_whip_ingest","title":"WHIP Ingest Guide","description":"What is WHIP?","source":"@site/docs/webrtc/nanostream_webrtc_whip_ingest.md","sourceDirName":"webrtc","slug":"/webrtc/nanostream_webrtc_whip_ingest","permalink":"/docs/webrtc/nanostream_webrtc_whip_ingest","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1751618628000,"frontMatter":{"id":"nanostream_webrtc_whip_ingest","title":"WHIP Ingest Guide","sidebar_label":"WHIP Ingest"},"sidebar":"nanoStream Webcaster","previous":{"title":"Migration Guide From v5 To v6","permalink":"/docs/webrtc/migration_guide_v6"},"next":{"title":"FAQ","permalink":"/docs/webrtc/nanostream_webrtc_faq"}}');var s=t(74848),r=t(28453);const o={id:"nanostream_webrtc_whip_ingest",title:"WHIP Ingest Guide",sidebar_label:"WHIP Ingest"},a=void 0,d={},l=[{value:"What is WHIP?",id:"what-is-whip",level:2},{value:"How WHIP Works",id:"how-whip-works",level:3},{value:"Benefits of WHIP",id:"benefits-of-whip",level:3},{value:"WHIP Ingest on nanoStream Cloud",id:"whip-ingest-on-nanostream-cloud",level:2},{value:"Features",id:"features",level:3},{value:"WHIP Ingest Quick Guide",id:"whip-ingest-quick-guide",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"what-is-whip",children:"What is WHIP?"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.em,{children:"WebRTC-HTTP Ingest Protocol"})," (WHIP) is a simple HTTP-based protocol that allows ingestion of media content into a broadcasting ingestion endpoint."]}),"\n",(0,s.jsx)(n.p,{children:"It defines how to use standard HTTP mechanisms like POST requests, authentication headers, and response codes for establishing a WebRTC connection to ingest audio/video."}),"\n",(0,s.jsxs)(n.admonition,{title:"WHIP Overview",type:"note",children:[(0,s.jsx)(n.h3,{id:"how-whip-works",children:"How WHIP Works"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The client (encoder/camera) sends an HTTP POST request to the WHIP endpoint with the SDP offer in the body."}),"\n",(0,s.jsx)(n.li,{children:"The WHIP endpoint responds with a 201 Created status and the SDP answer in the body."}),"\n",(0,s.jsx)(n.li,{children:"This establishes the WebRTC connection for media ingestion."}),"\n",(0,s.jsx)(n.li,{children:"The WHIP endpoint can provide ICE server configuration via Link headers in responses."}),"\n"]}),(0,s.jsx)(n.h3,{id:"benefits-of-whip",children:"Benefits of WHIP"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Uses widely adopted HTTP protocol rather than proprietary protocols."}),"\n",(0,s.jsx)(n.li,{children:"Leverages standard HTTP security, load balancing, and so on."}),"\n",(0,s.jsx)(n.li,{children:"Simplifies integration of encoders/cameras with WebRTC platforms."}),"\n"]})]}),"\n",(0,s.jsx)(n.h2,{id:"whip-ingest-on-nanostream-cloud",children:"WHIP Ingest on nanoStream Cloud"}),"\n",(0,s.jsx)(n.h3,{id:"features",children:"Features"}),"\n",(0,s.jsx)(n.p,{children:"Our WebRTC-HTTP servers support the following features:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Create broadcast streams via WebRTC"}),"\n",(0,s.jsx)(n.li,{children:"Push broadcast to nanoStream Cloud upstream via RTMP protocol"}),"\n",(0,s.jsx)(n.li,{children:"Toggle/switch client side video tracks (inputs) at runtime"}),"\n",(0,s.jsx)(n.li,{children:"Control upstream quality at runtime"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The current implementation of WHIP follows the mandatory parts from ",(0,s.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/draft-ietf-wish-whip/",children:"specifications"}),","]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Endpoint provides service to create resource and delete resource."}),"\n",(0,s.jsx)(n.li,{children:"Bearer token authorization isn't required in the current implementation."}),"\n",(0,s.jsx)(n.li,{children:"Requires Input sources to have H.264 codec for video, and Opus for audio."}),"\n",(0,s.jsxs)(n.li,{children:["The client should append configuration options as query parameters for the target ingest to set up the broadcast stream.\nThe parameters ",(0,s.jsx)(n.code,{children:"stream_name"})," and ",(0,s.jsx)(n.code,{children:"stream_url"})," are ",(0,s.jsx)(n.strong,{children:"mandatory"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"We provide a WHIP endpoint at:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:" https://bintu-webrtc.nanocosmos.de/p/webrtc\n"})}),"\n",(0,s.jsx)(n.p,{children:"The request to create resource will then look like the form:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"POST https://bintu-webrtc.nanocosmos.de/p/webrtc?stream_name=<example-stream>&stream_url=rtmp://bintu-stream.nanocosmos.de:1935/live\n[sdp body]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"whip-ingest-quick-guide",children:"WHIP Ingest Quick Guide"}),"\n",(0,s.jsxs)(n.admonition,{title:"WHIP Ingest Setup",type:"tip",children:[(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Prepare for streaming"})}),"\n",(0,s.jsx)(n.p,{children:"Obtain Stream Name"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Sign in to your nanoStream Cloud dashboard"}),"\n",(0,s.jsx)(n.li,{children:"Create a new stream or choose an existing created or Ended stream"}),"\n",(0,s.jsxs)(n.li,{children:["Alternatively, get your API key and prepare stream with ",(0,s.jsx)(n.a,{href:"../cloud/bintu_api",children:"bintu API"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Configure Encoder ingest URL"})}),"\n",(0,s.jsx)(n.p,{children:"In your encoder software or device, select the WHIP ingest protocol."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use the WHIP ingest URL format:"}),"\n"]}),"\n"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    https://bintu-webrtc.nanocosmos.de/p/webrtc?stream_name=<STREAM NAME>&stream_url=<STREAM URL>\n\n"})}),(0,s.jsx)(n.p,{children:"Full request path will have the form:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\n    https://bintu-webrtc.nanocosmos.de/p/webrtc?stream_name=<string>&stream_url=rtmp://bintu-stream.nanocosmos.de/live\n\n"})}),(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Encoder Settings"})}),"\n",(0,s.jsx)(n.p,{children:"Use H.264 video codec, and Opus audio codec.\nConfigure video resolution and audio quality options according to preferences"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"Recommended settings"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"W\xd7H: 1280\xd7720 resolution"}),"\n",(0,s.jsx)(n.li,{children:"FR: 25 fps"}),"\n",(0,s.jsx)(n.li,{children:"Bitrate: 2 Mbps"}),"\n",(0,s.jsxs)(n.li,{children:["Keyframe Interval: 2 second, or GoP size of ",(0,s.jsx)(n.em,{children:"FR"}),"\xd72","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"(i.e. in OBS > Settings > Output (Advanced) > Streaming > Encoder Setting > Keyframe Interval)"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Start Stream"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Start streaming from your encoder"}),"\n",(0,s.jsx)(n.li,{children:"Your stream will be ingested into nanoStream Cloud via WHIP"}),"\n",(0,s.jsx)(n.li,{children:"The stream will broadcast over RTMP from:"}),"\n"]}),"\n"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\nrtmp://bintu-stream.nanocosmos.de/live/STREAM-NAME\n\n"})})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);