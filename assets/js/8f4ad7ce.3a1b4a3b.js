"use strict";(self.webpackChunknanocosomos_documentation=self.webpackChunknanocosomos_documentation||[]).push([[3367],{3737:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"webrtc/nanostream_webrtc_quality","title":"Quality Settings","description":"Stream Quality Configuration","source":"@site/docs/webrtc/nanostream_webrtc_quality.md","sourceDirName":"webrtc","slug":"/webrtc/nanostream_webrtc_quality","permalink":"/docs/webrtc/nanostream_webrtc_quality","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1751618628000,"frontMatter":{"id":"nanostream_webrtc_quality","title":"Quality Settings","sidebar_label":"Quality Settings"},"sidebar":"nanoStream Webcaster","previous":{"title":"Multiple Webcasts","permalink":"/docs/webrtc/nanostream_webrtc_multiple_webcasts"},"next":{"title":"Device Selection","permalink":"/docs/webrtc/nanostream_webrtc_device_selection"}}');var r=n(74848),a=n(28453);const o={id:"nanostream_webrtc_quality",title:"Quality Settings",sidebar_label:"Quality Settings"},s=void 0,c={},l=[{value:"Stream Quality Configuration",id:"stream-quality-configuration",level:2},{value:"Media Stream Quality Configuration",id:"media-stream-quality-configuration",level:3},{value:"Browser-side Encoding Options",id:"browser-side-encoding-options",level:3},{value:"Audio Conversion on the Server",id:"audio-conversion-on-the-server",level:3}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"stream-quality-configuration",children:"Stream Quality Configuration"}),"\n",(0,r.jsx)(t.p,{children:"Webcaster API allows you to configure the quality settings for your broadcasts. You can control the quality of your streams through Media Stream constraints and encoding properties in two corresponding places:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Media Stream (Preview) Configuration:"})," These settings affect the quality of the preview stream before broadcasting. Learn more about ",(0,r.jsx)(t.a,{href:"#media-stream-quality-configuration",children:"Media Stream Quality Configuration"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Broadcast Configuration:"})," These settings influence the encoding and quality of the stream as it's sent to the nanoStream Cloud. Explore ",(0,r.jsx)(t.a,{href:"#browser-side-encoding-options",children:"Browser-side Encoding Options"})," and ",(0,r.jsx)(t.a,{href:"#audio-conversion-on-the-server",children:"Audio Conversion on the Server"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"media-stream-quality-configuration",children:"Media Stream Quality Configuration"}),"\n",(0,r.jsx)(t.p,{children:"Adjust various quality settings for your media stream:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Video resolution"}),"\n",(0,r.jsx)(t.li,{children:"Maximum video frame rate"}),"\n",(0,r.jsx)(t.li,{children:"Audio constraints"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"const webcaster = new window.WebcasterApiV6.Webcaster({\n  inputCfg: {\n    mediaStreamCfg: {\n      resolution: [1280, 720],\n      maxFramerate: 30,\n      audioConstraints: {\n        autoGainControl: true,\n        channelCount: 1,\n        echoCancellation: true,\n        noiseSuppression: true\n      }\n    },\n  },\n  serverUrl: 'https://bintu-webrtc.nanocosmos.de/p/webrtc',\n  ingestUrl: 'rtmp://bintu-stream.nanocosmos.de:1935/live',\n  streamName: '<STREAM-NAME-1>'\n});\n\nawait webcaster.setup()\nawait webcaster.startBroadcast()\n"})}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsxs)(t.p,{children:["Note that the ",(0,r.jsx)(t.code,{children:"resolution"}),' is "ideal" value. In the end, it is up to a browser to decide what resolution is the most optimal one in a particular case. Similar applies to ',(0,r.jsx)(t.code,{children:"maxFramerate"})," which only sets the upper limit of frame rate"]})}),"\n",(0,r.jsx)(t.h3,{id:"browser-side-encoding-options",children:"Browser-side Encoding Options"}),"\n",(0,r.jsx)(t.p,{children:"After the webcaster has been set up and before the stream is sent to the nanoStream cloud, it is encoded in the browser.\nIt's possible to configure the following encoding properties:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Maximum video bitrate"}),"\n",(0,r.jsx)(t.li,{children:"Maximum audio bitrate"}),"\n",(0,r.jsx)(t.li,{children:"Maximum encoding frame rate"}),"\n",(0,r.jsx)(t.li,{children:"Audio transcoding bitrate"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"const webcaster = new window.WebcasterApiV6.Webcaster({\n  inputCfg: {\n    broadcastCfg: {\n      maxAudioBitrateBps: 64000,\n      maxVideoBitrateBps: 2000000,\n      maxEncodingFramerate: 30,\n    },\n  },\n  serverUrl: 'https://bintu-webrtc.nanocosmos.de/p/webrtc',\n  ingestUrl: 'rtmp://bintu-stream.nanocosmos.de:1935/live',\n  streamName: '<STREAM-NAME-1>'\n});\n\nawait webcaster.setup()\nawait webcaster.startBroadcast()\n"})}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsx)(t.p,{children:"Note that these values are upper limits. The browser will only go up to the configured bitrate if the image is complex (for example, if there is a lot of motion in the image). This usually means that the average bitrate will be lower than the\nconfigured maximum bitrate. For example, if there is no movement in front of the camera or the image is dark, the video bitrate will be lower than configured.\nmaxEncodingFramerate' takes into account the Media Stream frame rate setting and cannot be higher than this."})}),"\n",(0,r.jsx)(t.h3,{id:"audio-conversion-on-the-server",children:"Audio Conversion on the Server"}),"\n",(0,r.jsxs)(t.p,{children:["The video bitrate of the resulting RTMP stream will be similar to the bitrate encoded by browsers. Audio is converted on the server side, so it's also possible to set the transcoding bitrate for audio.",(0,r.jsx)("br",{})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"const webcaster = new window.WebcasterApiV6.Webcaster({\n  inputCfg: {\n    broadcastCfg: {\n      transcodeAudioBitrateBps: 64000,\n    },\n  },\n  serverUrl: 'https://bintu-webrtc.nanocosmos.de/p/webrtc',\n  ingestUrl: 'rtmp://bintu-stream.nanocosmos.de:1935/live',\n  streamName: '<STREAM-NAME-1>'\n});\n\nawait webcaster.setup()\nawait webcaster.startBroadcast()\n"})})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>s});var i=n(96540);const r={},a=i.createContext(r);function o(e){const t=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);