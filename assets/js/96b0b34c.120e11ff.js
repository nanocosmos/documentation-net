"use strict";(self.webpackChunknanocosomos_documentation=self.webpackChunknanocosomos_documentation||[]).push([[374],{23481:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"nanoplayer/nanoplayer_api_errors","title":"NanoPlayer Error Codes & Handling","description":"General","source":"@site/docs/nanoplayer/nanoplayer_api_errors.md","sourceDirName":"nanoplayer","slug":"/nanoplayer/nanoplayer_api_errors","permalink":"/docs/nanoplayer/nanoplayer_api_errors","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1751618628000,"frontMatter":{"id":"nanoplayer_api_errors","title":"NanoPlayer Error Codes & Handling","sidebar_label":"NanoPlayer Error Codes & Handling"},"sidebar":"H5Live Player","previous":{"title":"NanoPlayer","permalink":"/docs/nanoplayer/nanoplayer_api"},"next":{"title":"FAQ","permalink":"/docs/nanoplayer/nanoplayer_faq"}}');var a=n(74848),i=n(28453);const s={id:"nanoplayer_api_errors",title:"NanoPlayer Error Codes & Handling",sidebar_label:"NanoPlayer Error Codes & Handling"},t=void 0,l={},d=[{value:"General",id:"general",level:2},{value:"Player Errors",id:"player-errors",level:2},{value:"1005 Playback must be initialized by user gesture",id:"1005-playback-must-be-initialized-by-user-gesture",level:3},{value:"1007 Playback suspended by external reason",id:"1007-playback-suspended-by-external-reason",level:3},{value:"1008 Playback error. Only on iOS",id:"1008-playback-error-only-on-ios",level:3},{value:"1009 Playback failed because the player was in visibility state &#39;hidden&#39; at load start",id:"1009-playback-failed-because-the-player-was-in-visibility-state-hidden-at-load-start",level:3},{value:"Stream Errors",id:"stream-errors",level:2},{value:"2001 The requested stream can not be found",id:"2001-the-requested-stream-can-not-be-found",level:3},{value:"2002 No media available",id:"2002-no-media-available",level:3},{value:"2003 Not enough media data received",id:"2003-not-enough-media-data-received",level:3},{value:"2004 The source stream has been stopped",id:"2004-the-source-stream-has-been-stopped",level:3},{value:"Media Errors",id:"media-errors",level:2},{value:"3003 An error occurred when decoding media",id:"3003-an-error-occurred-when-decoding-media",level:3},{value:"3005 An error occurred while hls playback when decoding video",id:"3005-an-error-occurred-while-hls-playback-when-decoding-video",level:3},{value:"3100 The media source extension changed the state to &#39;ended&#39;",id:"3100-the-media-source-extension-changed-the-state-to-ended",level:3},{value:"3101 An error occurred while buffering on hls playback",id:"3101-an-error-occurred-while-buffering-on-hls-playback",level:3},{value:"Network Errors",id:"network-errors",level:2},{value:"4001 Could not open connection. Timeout reached",id:"4001-could-not-open-connection-timeout-reached",level:3},{value:"4006 The source request was aborted by timeout",id:"4006-the-source-request-was-aborted-by-timeout",level:3},{value:"4106 Maybe no network, wrong url or server down. Reconnect possible",id:"4106-maybe-no-network-wrong-url-or-server-down-reconnect-possible",level:3},{value:"Security Errors",id:"security-errors",level:2},{value:"4901 The security service denied access. The authentication token is invalid",id:"4901-the-security-service-denied-access-the-authentication-token-is-invalid",level:3},{value:"4903 The security service denied access. The url is expired or a token parameter is missing (expires, token, or options)",id:"4903-the-security-service-denied-access-the-url-is-expired-or-a-token-parameter-is-missing-expires-token-or-options",level:3},{value:"Setup Errors",id:"setup-errors",level:2},{value:"5001 &quot;?javascript error?&quot;",id:"5001-javascript-error",level:3},{value:"5002 This browser does not fully support HTML5 and H5Live",id:"5002-this-browser-does-not-fully-support-html5-and-h5live",level:3},{value:"5004 The players source configuration is malformed or missing",id:"5004-the-players-source-configuration-is-malformed-or-missing",level:3},{value:"Error handling",id:"error-handling",level:2},{value:"Most common errors that shouldn&#39;t be recovered by user due to internal automatic recovery or reconnection workflow",id:"most-common-errors-that-shouldnt-be-recovered-by-user-due-to-internal-automatic-recovery-or-reconnection-workflow",level:3},{value:"Reconnect/replay event flow",id:"reconnectreplay-event-flow",level:3},{value:"Example code snippet",id:"example-code-snippet",level:3},{value:"Startup Errors",id:"startup-errors",level:2},{value:"since 4.28.0",id:"since-4280",level:4},{value:"Event Object Examples",id:"event-object-examples",level:3}];function c(e){const r={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.h2,{id:"general",children:"General"}),"\n",(0,a.jsxs)(r.p,{children:["In case something went wrong at setup, startup or playback an error will be thrown over the ",(0,a.jsx)(r.a,{href:"./nanoplayer_api#NanoPlayer..event_onError",children:(0,a.jsx)(r.code,{children:"onError"})})," event if registered with an error handler function over ",(0,a.jsx)(r.a,{href:"./nanoplayer_api/#NanoPlayer..config",children:(0,a.jsx)(r.code,{children:"config.events.onError"})}),"."]}),"\n",(0,a.jsx)(r.p,{children:"There are five error groups:"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.a,{href:"#player-errors",children:(0,a.jsx)(r.strong,{children:"General Player Errors"})})," ",(0,a.jsx)(r.code,{children:"1000-1999"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.a,{href:"#stream-errors",children:(0,a.jsx)(r.strong,{children:"Stream Errors"})})," ",(0,a.jsx)(r.code,{children:"2000-2999"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.a,{href:"#media-errors",children:(0,a.jsx)(r.strong,{children:"Media Element Errors"})})," ",(0,a.jsx)(r.code,{children:"3000-3999"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.a,{href:"#network-errors",children:(0,a.jsx)(r.strong,{children:"Network Connection and Security Errors"})})," ",(0,a.jsx)(r.code,{children:"4000-4999"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.a,{href:"#setup-errors",children:(0,a.jsx)(r.strong,{children:"Setup Errors"})})," ",(0,a.jsx)(r.code,{children:"5000-5999"})]}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["Following some of the most frequent errors will be described.",(0,a.jsx)("br",{})," To see all errors please have a look at the possible ",(0,a.jsx)(r.a,{href:"./nanoplayer_api/#NanoPlayer..errorcode",children:(0,a.jsx)(r.code,{children:"errorcodes"})}),"."]}),"\n",(0,a.jsx)(r.h2,{id:"player-errors",children:"Player Errors"}),"\n",(0,a.jsx)(r.admonition,{type:"info",children:(0,a.jsxs)(r.p,{children:["These errors have codes in a ",(0,a.jsx)(r.strong,{children:"range from 1000 to 1999"}),"."]})}),"\n",(0,a.jsxs)(r.p,{children:["1xxx codes represent general errors of the player on startup or playback.",(0,a.jsx)("br",{}),"\nThe most frequent errors here are ",(0,a.jsx)(r.code,{children:"1005"}),", ",(0,a.jsx)(r.code,{children:"1007"}),". ",(0,a.jsx)(r.code,{children:"1008"})," and ",(0,a.jsx)(r.code,{children:"1009"}),"."]}),"\n",(0,a.jsx)(r.h3,{id:"1005-playback-must-be-initialized-by-user-gesture",children:"1005 Playback must be initialized by user gesture"}),"\n",(0,a.jsx)(r.p,{children:"This is related to autoplay. There are two possible scenarios for this error occurrence:"}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsx)(r.li,{children:"Unmuted playback is not able to start due to the browser policy"}),"\n",(0,a.jsx)(r.li,{children:"iOS low power mode"}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["It is recommended to review the autoplay settings.",(0,a.jsx)("br",{})]}),"\n",(0,a.jsxs)(r.p,{children:["Read more about how to configure ",(0,a.jsx)(r.a,{href:"./nanoplayer_autoplay",children:"Autoplay"}),"."]}),"\n",(0,a.jsx)(r.h3,{id:"1007-playback-suspended-by-external-reason",children:"1007 Playback suspended by external reason"}),"\n",(0,a.jsxs)(r.p,{children:["This is indicating a special condition on mobile devices when the playback has been stopped by an event in the browser or system on a mobile device.",(0,a.jsx)("br",{})]}),"\n",(0,a.jsx)(r.admonition,{type:"info",children:(0,a.jsx)(r.p,{children:"This is a non critical error."})}),"\n",(0,a.jsx)(r.admonition,{type:"info",children:(0,a.jsxs)(r.p,{children:["This error should not be handled by immediate replay,\ninstead the web application should monitor the document visibility state\nand initiate a replay via ",(0,a.jsx)(r.code,{children:"player.play()"}),", once it became ",(0,a.jsx)(r.code,{children:"visible"})," again.\n",(0,a.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilityState",children:"https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilityState"})]})}),"\n",(0,a.jsx)(r.p,{children:"This includes:"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"Player tab going to background after a tab switch"}),"\n",(0,a.jsx)(r.li,{children:"Browser application being minimized or closed"}),"\n",(0,a.jsx)(r.li,{children:"Browser application being interrupted by the system, e.g. in case of an incoming call or device being locked"}),"\n"]}),"\n",(0,a.jsx)(r.h3,{id:"1008-playback-error-only-on-ios",children:"1008 Playback error. Only on iOS"}),"\n",(0,a.jsxs)(r.p,{children:["An unexpected error occurred during playback on iOS. This error is recoverable. Read more about ",(0,a.jsx)(r.a,{href:"./nanoplayer_feature_media_error_recovery",children:"Media Error Recovery"}),"."]}),"\n",(0,a.jsx)(r.h3,{id:"1009-playback-failed-because-the-player-was-in-visibility-state-hidden-at-load-start",children:"1009 Playback failed because the player was in visibility state 'hidden' at load start"}),"\n",(0,a.jsx)(r.p,{children:"This is related to a policy in some browsers, e.g. Chrome, Chromium based and Safari preventing media playback start in a background tab, a tab that did not have focus/visibility yet."}),"\n",(0,a.jsx)(r.admonition,{type:"info",children:(0,a.jsxs)(r.p,{children:["This error should not be handled by immediate replay,\ninstead the web application should monitor the document visibility state\nand initiate a replay via ",(0,a.jsx)(r.code,{children:"player.play()"}),", once it became ",(0,a.jsx)(r.code,{children:"visible"})," again.\n",(0,a.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilityState",children:"https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilityState"})]})}),"\n",(0,a.jsx)(r.h2,{id:"stream-errors",children:"Stream Errors"}),"\n",(0,a.jsx)(r.admonition,{type:"info",children:(0,a.jsxs)(r.p,{children:["These errors have codes in a ",(0,a.jsx)(r.strong,{children:"range from 2000 to 2999"}),"."]})}),"\n",(0,a.jsxs)(r.p,{children:["2xxx codes are related to fetching the media stream on the player side and the occurrence\nof timeouts during loading or playback. It is about the availability of the stream on the player side,\nwhich can be connected to the general availabilty of the stream, but as well to bad network conditions\non the player side.",(0,a.jsx)("br",{}),"\nThe most frequent errors here are ",(0,a.jsx)(r.code,{children:"2001"}),", ",(0,a.jsx)(r.code,{children:"2002"}),", ",(0,a.jsx)(r.code,{children:"2003"})," and ",(0,a.jsx)(r.code,{children:"2004"}),"."]}),"\n",(0,a.jsx)(r.h3,{id:"2001-the-requested-stream-can-not-be-found",children:"2001 The requested stream can not be found"}),"\n",(0,a.jsx)(r.p,{children:"No stream info and media data received."}),"\n",(0,a.jsx)(r.h3,{id:"2002-no-media-available",children:"2002 No media available"}),"\n",(0,a.jsx)(r.p,{children:"The stream was already playing, but media data stopped receiving."}),"\n",(0,a.jsx)(r.h3,{id:"2003-not-enough-media-data-received",children:"2003 Not enough media data received"}),"\n",(0,a.jsx)(r.p,{children:"Stream info is received, but no media data was fetched."}),"\n",(0,a.jsx)(r.h3,{id:"2004-the-source-stream-has-been-stopped",children:"2004 The source stream has been stopped"}),"\n",(0,a.jsx)(r.p,{children:"The stream was already playing, but the stream was unpublished."}),"\n",(0,a.jsx)(r.h2,{id:"media-errors",children:"Media Errors"}),"\n",(0,a.jsx)(r.admonition,{type:"info",children:(0,a.jsxs)(r.p,{children:["These errors have codes in a ",(0,a.jsx)(r.strong,{children:"range from 3000 to 3999"}),"."]})}),"\n",(0,a.jsxs)(r.p,{children:["3xxx codes are related to media playback errors in the system/browser playback components,\nMediaElement and/or Media Source Extensions.",(0,a.jsx)("br",{}),"\nThe most present errors here are ",(0,a.jsx)(r.code,{children:"3003"}),", ",(0,a.jsx)(r.code,{children:"3100"})," for MSE playback and ",(0,a.jsx)(r.code,{children:"3005"}),", ",(0,a.jsx)(r.code,{children:"3101"})," for HLS playback. This errors can be recovered.\nRead more about ",(0,a.jsx)(r.a,{href:"./nanoplayer_feature_media_error_recovery",children:"Media Error Recovery"}),"."]}),"\n",(0,a.jsx)(r.h3,{id:"3003-an-error-occurred-when-decoding-media",children:"3003 An error occurred when decoding media"}),"\n",(0,a.jsx)(r.p,{children:"An receiving media data chunk couldn't be decoded."}),"\n",(0,a.jsx)(r.h3,{id:"3005-an-error-occurred-while-hls-playback-when-decoding-video",children:"3005 An error occurred while hls playback when decoding video"}),"\n",(0,a.jsx)(r.p,{children:"The receiving media data of the hls stream couldn't be decoded."}),"\n",(0,a.jsx)(r.h3,{id:"3100-the-media-source-extension-changed-the-state-to-ended",children:"3100 The media source extension changed the state to 'ended'"}),"\n",(0,a.jsx)(r.p,{children:"The MSE stopped working."}),"\n",(0,a.jsx)(r.h3,{id:"3101-an-error-occurred-while-buffering-on-hls-playback",children:"3101 An error occurred while buffering on hls playback"}),"\n",(0,a.jsx)(r.p,{children:"The hls playback was interupted during media data buffering."}),"\n",(0,a.jsx)(r.h2,{id:"network-errors",children:"Network Errors"}),"\n",(0,a.jsx)(r.admonition,{type:"info",children:(0,a.jsxs)(r.p,{children:["These errors have codes in a ",(0,a.jsx)(r.strong,{children:"range from 4000 to 4899"}),"."]})}),"\n",(0,a.jsx)(r.p,{children:"4xxx codes are related to network errors of the media stream connections.\nConnect failures can be caused by bad network conditions, firewall issues\nand in rare cases by overreacting ad blockers."}),"\n",(0,a.jsx)(r.h3,{id:"4001-could-not-open-connection-timeout-reached",children:"4001 Could not open connection. Timeout reached"}),"\n",(0,a.jsx)(r.p,{children:"The websocket server is not available or not present, a timeout for establishing the connection is reached."}),"\n",(0,a.jsx)(r.h3,{id:"4006-the-source-request-was-aborted-by-timeout",children:"4006 The source request was aborted by timeout"}),"\n",(0,a.jsxs)(r.p,{children:["An ",(0,a.jsx)(r.a,{href:"./nanoplayer_api#NanoPlayer+updateSource",children:(0,a.jsx)(r.code,{children:"updateSource"})})," or a ",(0,a.jsx)(r.a,{href:"./nanoplayer_api#NanoPlayer+switchStream",children:(0,a.jsx)(r.code,{children:"switchStream"})})," request was run into a timeout."]}),"\n",(0,a.jsx)(r.h3,{id:"4106-maybe-no-network-wrong-url-or-server-down-reconnect-possible",children:"4106 Maybe no network, wrong url or server down. Reconnect possible"}),"\n",(0,a.jsx)(r.p,{children:"The websocket server is not available or not present, establishing new connection is possible."}),"\n",(0,a.jsx)(r.h2,{id:"security-errors",children:"Security Errors"}),"\n",(0,a.jsx)(r.admonition,{type:"info",children:(0,a.jsxs)(r.p,{children:["These errors have codes in a ",(0,a.jsx)(r.strong,{children:"range from 4900 to 4999"}),"."]})}),"\n",(0,a.jsx)(r.h3,{id:"4901-the-security-service-denied-access-the-authentication-token-is-invalid",children:"4901 The security service denied access. The authentication token is invalid"}),"\n",(0,a.jsxs)(r.p,{children:["Unsuccesful authentication due to invalid token. Read more about ",(0,a.jsx)(r.a,{href:"./nanoplayer_token_security",children:"Secure playback with H5Live"}),"."]}),"\n",(0,a.jsx)(r.h3,{id:"4903-the-security-service-denied-access-the-url-is-expired-or-a-token-parameter-is-missing-expires-token-or-options",children:"4903 The security service denied access. The url is expired or a token parameter is missing (expires, token, or options)"}),"\n",(0,a.jsxs)(r.p,{children:["Unsuccesful authentication due to expired token or a missing token parameter. Read more about ",(0,a.jsx)(r.a,{href:"./nanoplayer_token_security",children:"Secure playback with H5Live"}),"."]}),"\n",(0,a.jsx)(r.h2,{id:"setup-errors",children:"Setup Errors"}),"\n",(0,a.jsx)(r.admonition,{type:"info",children:(0,a.jsxs)(r.p,{children:["These errors have codes in a ",(0,a.jsx)(r.strong,{children:"range from 5000 to 5999"}),"."]})}),"\n",(0,a.jsx)(r.p,{children:"5xxx are related to errors during the setup/configuration stage, mainly configuration errors and insufficient browser capabilities.\nIn most cases it makes sense to check the configuration that has been used."}),"\n",(0,a.jsx)(r.h3,{id:"5001-javascript-error",children:'5001 "?javascript error?"'}),"\n",(0,a.jsxs)(r.p,{children:["A javascript error occured during setup promise execution. Most often the is reason an 'undefined' error within the setup promise resolve or triggered events (e.g. ",(0,a.jsx)(r.a,{href:"./nanoplayer_api/#NanoPlayer..event_onReady",children:(0,a.jsx)(r.code,{children:"onReady"})}),", ",(0,a.jsx)(r.a,{href:"./nanoplayer_api/#NanoPlayer..event_onMute",children:(0,a.jsx)(r.code,{children:"onMute"})})," or ",(0,a.jsx)(r.a,{href:"./nanoplayer_api/#NanoPlayer..event_onVolumeChange",children:(0,a.jsx)(r.code,{children:"onVolumeChange"})}),") during setup.",(0,a.jsx)("br",{})]}),"\n",(0,a.jsx)(r.p,{children:"Example:"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:'"undefined is not an object"'}),"\n"]}),"\n",(0,a.jsx)(r.h3,{id:"5002-this-browser-does-not-fully-support-html5-and-h5live",children:"5002 This browser does not fully support HTML5 and H5Live"}),"\n",(0,a.jsxs)(r.p,{children:["The used browser does not fully support HTML5 and H5Live.",(0,a.jsx)("br",{})]}),"\n",(0,a.jsx)(r.p,{children:"Supported browsers are:"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"Chrome >=54 (Windows, MacOSX, Android)"}),"\n",(0,a.jsx)(r.li,{children:"Firefox >=48 (Windows, MacOSX, Android)"}),"\n",(0,a.jsx)(r.li,{children:"Microsoft Edge (Windows)"}),"\n",(0,a.jsx)(r.li,{children:"Microsoft Internet Explorer 11 (at least Windows 8)"}),"\n",(0,a.jsx)(r.li,{children:"Safari (MacOSX & at least iOS 10)"}),"\n"]}),"\n",(0,a.jsx)(r.h3,{id:"5004-the-players-source-configuration-is-malformed-or-missing",children:"5004 The players source configuration is malformed or missing"}),"\n",(0,a.jsxs)(r.p,{children:["This setup error occurres when one of the key parameters (ie ",(0,a.jsx)(r.code,{children:"source"})," object, ",(0,a.jsx)(r.code,{children:"group.id"})," or ",(0,a.jsx)(r.code,{children:"rtmp.streamname"}),") in the config object is malformed, therefore not readable for config parsing, or missing.\nProper configuration examples can be found in ",(0,a.jsx)(r.a,{href:"./nanoplayer_getting_started",children:"Getting started"}),"."]}),"\n",(0,a.jsx)(r.h2,{id:"error-handling",children:"Error handling"}),"\n",(0,a.jsx)(r.p,{children:"In case of an error, the following choice is to either try to replay/reconnect, or do nothing."}),"\n",(0,a.jsx)(r.p,{children:"There are 3 available scenarios depending on the error type:"}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsx)(r.li,{children:"Errors covered by internal recovery or reconnect workflow"}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:"a) Media element errors with available configuration for automatic recovery"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["error codes: ",(0,a.jsx)(r.code,{children:"1008"}),", ",(0,a.jsx)(r.code,{children:"3003"}),", ",(0,a.jsx)(r.code,{children:"3005"}),", ",(0,a.jsx)(r.code,{children:"3100"}),", ",(0,a.jsx)(r.code,{children:"3101"}),";"]}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["Those are media errors which have an automatic recovery workflow. In case of an error, the recovery will be triggered. The amount of recoveries is set within a time frame of 60 seconds and can be adjusted via player configuration. Read more about ",(0,a.jsx)(r.a,{href:"./nanoplayer_feature_media_error_recovery",children:"Media Error Recovery"}),"."]}),"\n",(0,a.jsx)(r.p,{children:"b) Network connection errors with available configuration for reconnection"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["error codes: ",(0,a.jsx)(r.code,{children:"4102"}),", ",(0,a.jsx)(r.code,{children:"4103"}),", ",(0,a.jsx)(r.code,{children:"4105"}),", ",(0,a.jsx)(r.code,{children:"4106"}),", ",(0,a.jsx)(r.code,{children:"4107"}),", ",(0,a.jsx)(r.code,{children:"4108"}),", ",(0,a.jsx)(r.code,{children:"4109"}),", ",(0,a.jsx)(r.code,{children:"4111"}),", ",(0,a.jsx)(r.code,{children:"4115"}),", ",(0,a.jsx)(r.code,{children:"4500"}),", ",(0,a.jsx)(r.code,{children:"4503"}),";"]}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["In case of initial connection failure or connection break up during streaming, there is an internal network reconnection workflow supported on all platforms except iOS. Read more about ",(0,a.jsx)(r.a,{href:"./nanoplayer_feature_reconnect_timeouts",children:"Reconnect and Timeouts"}),"."]}),"\n",(0,a.jsxs)(r.ol,{start:"2",children:["\n",(0,a.jsx)(r.li,{children:"Shouldn't be attempted to recover by retry"}),"\n"]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["error codes related to autoplay policies: ",(0,a.jsx)(r.code,{children:"1005"}),", ",(0,a.jsx)(r.code,{children:"1007"}),", ",(0,a.jsx)(r.code,{children:"1009"}),";"]}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["error codes related to network security: ",(0,a.jsx)(r.code,{children:"49xx"}),"-",(0,a.jsx)(r.code,{children:"4999"}),";"]}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["error codes related to setup: ",(0,a.jsx)(r.code,{children:"5001"}),"-",(0,a.jsx)(r.code,{children:"5010"}),";"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["There are errors which should not be attempted to recover as it would be mutually exclusive with the fundation of particular errors. Most errors in this category are directly linked with the mobile usage (autoplay policies, low power mode, tab switching), as well as security errors group (error codes: ",(0,a.jsx)(r.code,{children:"49xx"}),"-",(0,a.jsx)(r.code,{children:"4999"}),") and setup errors (error codes: ",(0,a.jsx)(r.code,{children:"5001"}),"-",(0,a.jsx)(r.code,{children:"5010"}),")."]}),"\n",(0,a.jsxs)(r.p,{children:["Example 1: user is switching tabs on the phone and the application with running player is going to the background for a moment. In this situation, no one wants to have a running playback in the background tab. As a result the ",(0,a.jsx)(r.code,{children:"1007"})," error (",(0,a.jsx)(r.code,{children:"Playback suspended by external reason"}),") is thrown and the playback should not be recovered while in the background tab. Therefore, the error recovery is not recommended for this error."]}),"\n",(0,a.jsxs)(r.ol,{start:"3",children:["\n",(0,a.jsx)(r.li,{children:"Errors for which replay can be attempted"}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:"Errors which are not a part of the internal automatic recovery or reconnect worfklow mentioned above (#1), nor are not suitable for the retry (#2) fall under the replay/reconnect attempt category.\nHowever, it is strongly recommended that in this scenario:"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"the number of consecutive replay attempts is limited and/or"}),"\n",(0,a.jsx)(r.li,{children:"the time/interval between consecutive replay attempts is increasing with the number of attempts"}),"\n"]}),"\n",(0,a.jsx)(r.h3,{id:"most-common-errors-that-shouldnt-be-recovered-by-user-due-to-internal-automatic-recovery-or-reconnection-workflow",children:"Most common errors that shouldn't be recovered by user due to internal automatic recovery or reconnection workflow"}),"\n",(0,a.jsx)(r.p,{children:"1005, // Playback must be initialized by user gesture.\n1007, // Playback suspended by external reason.\n1008, // Playback error, only on iOS.\n1009, // Playback failed because the player was in visibility state 'hidden' at load start.\n3001, // A fetching process of the media aborted by user.\n3002, // An error occurred when downloading media.\n3003, // An error occurred when decoding media.\n3004, // The received audio/video is not supported.\n3005, // The receiving media data of the hls stream couldn't be decoded.\n3100, // The media source extension changed the state to 'ended'. NOT AVAILABLE FOR HLS PLAYBACK.\n3101, // An error occurred while buffering on hls playback\n3200, // An unspecific media error occurred.\n4003  // Maximum number of reconnection tries reached."}),"\n",(0,a.jsx)(r.h3,{id:"reconnectreplay-event-flow",children:"Reconnect/replay event flow"}),"\n",(0,a.jsxs)(r.p,{children:["For errors that meet the conditions of replay/reconnection, there is a recommended workflow.\nBased on the last error code (stored in ",(0,a.jsx)(r.code,{children:"onError"})," handler), the replay decision and following execution will take place (in ",(0,a.jsx)(r.code,{children:"onPause"})," handler). The number of consecutive replay attempts should be limited."]}),"\n",(0,a.jsx)(r.h3,{id:"example-code-snippet",children:"Example code snippet"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-html",children:'<!DOCTYPE html>\n<html xmlns="http://www.w3.org/1999/xhtml">\n<body>\n    <div id="playerDiv"></div>\n    <p>\n        <input type="checkbox" id="enableReplay" checked>\n        <label for="replay">enable replay</label>\n    </p>\n    <script src="https://demo.nanocosmos.de/nanoplayer/api/release/nanoplayer.4.min.js"><\/script>\n    <script>\n        var player;\n        var config = {\n            "source": {\n                "defaults": {\n                    "service": "bintu"\n                },\n                "entries": [\n                    {\n                        "index": 0,\n                        "label": "stream 1",\n                        "tag": "",\n                        "info": {\n                            "bitrate": 1500,\n                            "width": 1280,\n                            "height": 720,\n                            "framerate": 30\n                        },\n                        "h5live": {\n                            "rtmp": {\n                                "streamname": "XXXXX-YYYYY" // Enter your stream name\n                            }\n                        }\n                    }\n                ],\n                "options": {\n                    "adaption": {\n                        "rule": "none"\n                    }\n                },\n                "startIndex": 0\n            },\n            "playback": {\n                "autoplay": true,\n                "automute": true,\n                "muted": false\n            },\n            "style": {\n                "controls": true,\n                "displayMutedAutoplay": false\n            },\n            // event callback functions\n            "events": {\n                "onPlay": onPlay,\n                "onPause": onPause,\n                "onError": onError,\n                "onSwitchStreamSuccess": onSwitchStreamSuccess,\n                "onUpdateSourceSuccess": onUpdateSourceSuccess\n            }\n        };\n\n        var enableReplayCheckBox = document.getElementById("enableReplay");\n        // last error\n        var error = null;\n        // current and maximum consecutive replay attempts \n        var playAttempts = 0, maxPlayAttempts = 10;\n        var errorCodesNotReplay = [\n            1005, // Playback must be initialized by user gesture.\n            1007, // Playback suspended by external reason.\n            1008, // Playback error, only on iOS.\n            1009, // Playback failed because the player was in visibility state \'hidden\' at load start.\n            3001, // A fetching process of the media aborted by user.\n            3002, // An error occurred when downloading media.\n            3003, // An error occurred when decoding media.\n            3004, // The received audio/video is not supported.\n            3005, // The receiving media data of the hls stream couldn\'t be decoded.\n            3100, // The media source extension changed the state to \'ended\'. NOT AVAILABLE FOR HLS PLAYBACK.\n            3101, // An error occurred while buffering on hls playback\n            3200, // An unspecific media error occurred.\n            4003  // Maximum number of reconnection tries reached.\n        ];\n\n        function resetPlayAttemps () {\n            playAttempts = 0;\n        }\n\n        // playback started successfully\n        function onPlay (e) {\n            resetPlayAttemps();\n        }\n\n        // store error, pause will be fired immediately\n        // error will be checked in pause handler\n        function onError (e) {\n            error = e.data;\n            console.log("error code: " + error.code.toString());\n            console.log("error message: " + error.message);\n        }\n\n        // check for error\n        function onPause (e) {\n            if (error !== null && e.reason !== \'normal\') {\n                console.log("paused after error " + error.code.toString());\n\n                if (enableReplayCheckBox.checked) {\n                    // shouldn\'t replay when error from errorCodesNotReplay occur or error from range: 4001-4999, 5001-5010\n                    if (errorCodesNotReplay.indexOf(error.code) !== -1 || ((error.code >= 4001 && error.code <= 4999) || (error.code >= 5001 && error.code <= 5010))) {\n                        doNotReplay();\n                    } else {\n                        doReplay();\n                    }\n                }\n            }\n            // reset error\n            error = null;\n        }\n\n        function onSwitchStreamSuccess () {\n            console.log("SwitchStreamSuccess");\n            resetPlayAttemps();\n        }\n\n        function onUpdateSourceSuccess () {\n            console.log("UpdateSourceSuccess");\n            resetPlayAttemps();\n        }\n\n        function doNotReplay () {\n            console.log("no replay scheduled");\n        }\n\n        function doReplay () {\n            try {\n                if (player && player.play) {\n                    if (playAttempts < maxPlayAttempts) {\n                        playAttempts++;\n                        console.log("replay attempt " + playAttempts.toString());\n                        player.play();\n                    } else {\n                        console.log(\'max replays reached\');\n                    }\n                }\n            } catch (err) { }\n        }\n\n        document.addEventListener(\'DOMContentLoaded\', function () {\n            player = new NanoPlayer("playerDiv");\n            player.setup(config).then(function (config) {\n                console.log("setup success");\n                console.log("config: " + JSON.stringify(config, undefined, 4));\n            }, function (error) {\n                console.log("setup reject error code: " + error.code.toString());\n                console.log("setup reject error message: " + error.message);\n            });\n        });\n    <\/script>\n</body>\n\n</html>\n'})}),"\n",(0,a.jsx)(r.h2,{id:"startup-errors",children:"Startup Errors"}),"\n",(0,a.jsx)(r.h4,{id:"since-4280",children:"since 4.28.0"}),"\n",(0,a.jsx)(r.p,{children:'These errors are not limited to specific error codes. Defined as "Startup Error" is any error that occures on a playback attempt within the initial loading phase including the first 30 seconds of playback. Tracking these errors helps identify potential issues that occur during the critical loading and startup phase, which are essential for user engagement and retention.'}),"\n",(0,a.jsxs)(r.p,{children:["In addition to ",(0,a.jsx)(r.code,{children:"data.code"})," and ",(0,a.jsx)(r.code,{children:"data.message"})," the event object of a startup error event provides more detailed information about the loading and startup phase."]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-js",children:"// The playback object includes the current playback stats as the error occured.\ndata.playback = {\n    bufferDelayCurrent: 'number', // seconds, always\n    bitrateCurrent:     'number', // milliseconds, always\n    framerateCurrent:   'number'  // milliseconds, always\n}\n\n// The state object includes all timestamps of the startup phase that have been reached before and as the error occurred.\n// The time values are relative to load start at a playback attempt.\ndata.state  = {\n    connected:             'number', // milliseconds, optional\n    firstFragmentReceived: 'number', // milliseconds, optional\n    firstFrameRendered:    'number', // milliseconds, optional\n    playable:              'number', // milliseconds, optional\n    playing:               'number', // milliseconds, optional\n    error:                 'number'  // milliseconds, always\n}\n"})}),"\n",(0,a.jsxs)(r.p,{children:["Errors which occure after at least 30 seconds of playback won't have these two additional subobject in their ",(0,a.jsx)(r.code,{children:"event.data"})," object."]}),"\n",(0,a.jsx)(r.h3,{id:"event-object-examples",children:"Event Object Examples"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"2003 error occured after loading timeout fired. There was no media data received but the connection was healty."}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-javascript",children:'{\n  "name": "Error",\n  "data": {\n    "code": 2003,\n    "message": "Not enough media data received.",\n    "playback": {\n      "bufferDelayCurrent": 0,\n      "bitrateCurrent": 0,\n      "framerateCurrent": 0\n    },\n    "state": {\n      "connected": 392,\n      "error": 10004\n    }\n  },\n  "player": "playerDiv",\n  "id": "69537640939",\n  "version": "4.28.0",\n  "state": 4\n}\n'})}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"1005 error occured immediately before playing. Media has already received and start buffer was reached."}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-javascript",children:'{\n  "name": "Error",\n  "data": {\n    "code": 1005,\n    "message": "Playback must be initialized by user gesture.",\n    "playback": {\n      "bufferDelayCurrent": 1.6,\n      "bitrateCurrent": 2781280,\n      "framerateCurrent": 49\n    },\n    "state": {\n      "connected": 430,\n      "firstFragmentReceived": 461,\n      "firstFrameRendered": 493,\n      "playable": 493,\n      "error": 682\n    }\n  },\n  "player": "playerDiv",\n  "id": "69537640939",\n  "version": "4.28.0",\n  "state": 4\n}\n'})}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"3100 error occured after a successful playback start but within the first 30 seconds of playback. Every timestamp is present."}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-javascript",children:'{\n  "name": "Error",\n  "data": {\n    "code": 3100,\n    "message": "The media source extension changed the state to \'ended\'.",\n    "playback": {\n      "bufferDelayCurrent": 0.62,\n      "bitrateCurrent": 1791984,\n      "framerateCurrent": 28\n    },\n    "state": {\n      "connected": 303,\n      "firstFragmentReceived": 339,\n      "firstFrameRendered": 352,\n      "playable": 382,\n      "playing": 496,\n      "error": 23973\n    }\n  },\n  "player": "playerDiv",\n  "id": "69537640939",\n  "version": "4.28.0",\n  "state": 5\n}\n'})})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>t});var o=n(96540);const a={},i=o.createContext(a);function s(e){const r=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),o.createElement(i.Provider,{value:r},e.children)}}}]);