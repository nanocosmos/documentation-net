"use strict";(self.webpackChunknanocosomos_documentation=self.webpackChunknanocosomos_documentation||[]).push([[4410],{28453:(e,i,t)=>{t.d(i,{R:()=>a,x:()=>o});var r=t(96540);const s={},n=r.createContext(s);function a(e){const i=r.useContext(n);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(n.Provider,{value:i},e.children)}},81772:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"cloud/analytics-api-docs","title":"Analytics API Docs","description":"Technical Developer Documentation","source":"@site/docs/cloud/analytics-api-documentation.md","sourceDirName":"cloud","slug":"/analytics/api-docs","permalink":"/docs/analytics/api-docs","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1751618628000,"frontMatter":{"slug":"/analytics/api-docs","id":"analytics-api-docs","title":"Analytics API Docs","sidebar_label":"Documentation"},"sidebar":"nanoStream Analytics","previous":{"title":"API","permalink":"/docs/analytics/api"},"next":{"title":"Error Code Definitions","permalink":"/docs/analytics/api-error-codes"}}');var s=t(74848),n=t(28453);const a={slug:"/analytics/api-docs",id:"analytics-api-docs",title:"Analytics API Docs",sidebar_label:"Documentation"},o=void 0,l={},c=[{value:"Technical Developer Documentation",id:"technical-developer-documentation",level:2},{value:"General Details",id:"general-details",level:2},{value:"Rate Limit",id:"rate-limit",level:3},{value:"API Categories",id:"api-categories",level:2},{value:"Usage Metrics",id:"usage-metrics",level:3},{value:"H5Live Metrics",id:"h5live-metrics",level:3},{value:"Webcaster Metrics",id:"webcaster-metrics",level:3},{value:"Viewer Metrics",id:"viewer-metrics",level:3},{value:"Monitoring",id:"monitoring",level:3},{value:"Alerting",id:"alerting",level:3},{value:"Successful Playback Start Ratio",id:"successful-playback-start-ratio",level:3},{value:"How To Use",id:"how-to-use",level:4},{value:"General Details",id:"general-details-1",level:4},{value:"API Details",id:"api-details",level:4},{value:"Example Use Case",id:"example-use-case",level:4},{value:"Filtering",id:"filtering",level:3}];function d(e){const i={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h2,{id:"technical-developer-documentation",children:"Technical Developer Documentation"}),"\n",(0,s.jsxs)(i.p,{children:["For API route specifications please refer to our ",(0,s.jsx)("a",{className:"badge-inText",href:"https://metrics.nanocosmos.de/api/doc/v2/",children:"technical API documentation. \u2699\ufe0f"})]}),"\n",(0,s.jsx)(i.h2,{id:"general-details",children:"General Details"}),"\n",(0,s.jsx)(i.h3,{id:"rate-limit",children:"Rate Limit"}),"\n",(0,s.jsxs)(i.p,{children:["This API limits the number of requests to ",(0,s.jsx)(i.strong,{children:"1 request per second"})," but allows a temporary ",(0,s.jsx)(i.strong,{children:"burst rate of up to 30 requests per second"})," to be processed immediately without delay. If the rate limit is exceeded, you will receive a 502 (Bad Gateway) or 504 (Gateway Timeout) HTTP error code from Nginx."]}),"\n",(0,s.jsx)(i.h2,{id:"api-categories",children:"API Categories"}),"\n",(0,s.jsx)(i.h3,{id:"usage-metrics",children:"Usage Metrics"}),"\n",(0,s.jsx)(i.p,{children:"These routes provide a detailed overview of your organisation's traffic volume in a specified time frame."}),"\n",(0,s.jsx)(i.h3,{id:"h5live-metrics",children:"H5Live Metrics"}),"\n",(0,s.jsx)(i.p,{children:"H5Live metrics routes offer a wide spectrum of information about everything connected to the H5Live player."}),"\n",(0,s.jsx)(i.h3,{id:"webcaster-metrics",children:"Webcaster Metrics"}),"\n",(0,s.jsxs)(i.p,{children:["To get more information about the ",(0,s.jsx)(i.a,{href:"https://docs.nanocosmos.de/docs/webrtc/nanostream_webrtc_introduction",children:"nanoStream Webcaster"})," usage in practice and it's benefits regarding additional meta data for ingest metrics, consider taking a look at these routes."]}),"\n",(0,s.jsx)(i.h3,{id:"viewer-metrics",children:"Viewer Metrics"}),"\n",(0,s.jsx)(i.p,{children:"Viewer metrics let you analyze the experience of your audiences."}),"\n",(0,s.jsx)(i.h3,{id:"monitoring",children:"Monitoring"}),"\n",(0,s.jsx)(i.p,{children:"Being able to monitor your live streams is a great idea to observe live performances and be always up-to-date about your streaming ."}),"\n",(0,s.jsx)(i.h3,{id:"alerting",children:"Alerting"}),"\n",(0,s.jsxs)(i.p,{children:["The alerting routes provide an overview of either your current and historical alerts, recommended actions and their potential causes. For more details about Alerting, please refer to our ",(0,s.jsx)(i.a,{href:"https://docs.nanocosmos.de/docs/analytics/monitoring",children:"Stream Health Monitoring Guide"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"successful-playback-start-ratio",children:"Successful Playback Start Ratio"}),"\n",(0,s.jsxs)(i.p,{children:["This ratio determines the relation between all occuring playback initializations that ",(0,s.jsx)(i.strong,{children:"DO NOT"})," terminate with an error ",(0,s.jsx)(i.strong,{children:"within the first 30 seconds"})," after the playback starts and the total number of playback initializations. Terminations after pausing or subsequently restarting the playback are not taken into account."]}),"\n",(0,s.jsx)("div",{className:"inline-math-center",children:"SPSR = (100 - failed playback starts) * 100 / all playbacks"}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"SPSR"}),' = "Successful Playback Start Ratio"']}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"PSE"}),' = "Playback Start Error"']}),"\n"]})}),"\n",(0,s.jsx)(i.h4,{id:"how-to-use",children:"How To Use"}),"\n",(0,s.jsx)(i.h4,{id:"general-details-1",children:"General Details"}),"\n",(0,s.jsxs)(i.p,{children:["The services of nanoStream Analytics determine the ",(0,s.jsx)(i.strong,{children:"SPSR"})," and ",(0,s.jsx)(i.strong,{children:"PSE"})," based on the player metrics data for every minute with a ",(0,s.jsx)(i.strong,{children:"5 minute delay"})," to the current minute.\nEither the calculated ",(0,s.jsx)(i.strong,{children:"ratios and errors"})," are based on your ",(0,s.jsx)(i.strong,{children:"organisation"}),", ",(0,s.jsx)(i.strong,{children:"stream"}),", ",(0,s.jsx)(i.strong,{children:"tag"})," or ",(0,s.jsx)(i.strong,{children:"country"})," of choice and offer different ",(0,s.jsx)(i.strong,{children:"breakdown terms"}),":"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Stream & Country (depends on the route)"}),"\n",(0,s.jsx)(i.li,{children:"Browser"}),"\n",(0,s.jsx)(i.li,{children:"Browser Version"}),"\n",(0,s.jsx)(i.li,{children:"Referrer"}),"\n",(0,s.jsx)(i.li,{children:"OS"}),"\n",(0,s.jsx)(i.li,{children:"OS Version"}),"\n",(0,s.jsx)(i.li,{children:"Player Version"}),"\n",(0,s.jsx)(i.li,{children:"City"}),"\n",(0,s.jsx)(i.li,{children:"IP"}),"\n",(0,s.jsx)(i.li,{children:"Initial ABR Profile"}),"\n",(0,s.jsx)(i.li,{children:"Media Playback API"}),"\n",(0,s.jsx)(i.li,{children:"Fast Start"}),"\n"]}),"\n",(0,s.jsx)(i.h4,{id:"api-details",children:"API Details"}),"\n",(0,s.jsx)(i.p,{children:"Basically the API routes are divided in 2 groups:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://metrics.nanocosmos.de/api/doc/v2/#tag/Playback-start-success",children:"SPSR API Routes"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://metrics.nanocosmos.de/api/doc/v2/#tag/Playback-start-errors",children:"PSE API Routes"})}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"SPSR"})," returns 3 metric values:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Total count of errors"}),"\n",(0,s.jsx)(i.li,{children:"Total count of playback starts"}),"\n",(0,s.jsx)(i.li,{children:"Proportion in percent of playback starts to sum of playback starts from all buckets"}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"PSE"})," returns a break down of:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"The found error codes & error messages (usually error code and message is 1:1 linked) occurred at playback start (refers to total count of errors of the SPSR metric)"}),"\n"]}),"\n",(0,s.jsx)(i.h4,{id:"example-use-case",children:"Example Use Case"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)("u",{children:"Problem"}),":"]}),"\n",(0,s.jsxs)(i.p,{children:["A high number of errors can be observed since yesterday morning.",(0,s.jsx)("br",{}),"\nThe assumption is made that this was caused by the h5live player version upgrade.",(0,s.jsx)("br",{}),"\nProblem is particularly present in brazil and needs validation whether this affects a large number of clients.",(0,s.jsx)("br",{}),"\nThe ",(0,s.jsx)(i.strong,{children:"SPSR"})," & ",(0,s.jsx)(i.strong,{children:"PSE"})," API routes can possibly reveal more insights about this incident."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)("u",{children:"How to investigate"}),":"]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["Get an overview of the SPSR with a timeseries with selected time interval 'hour':",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(i.code,{children:"/api/v2/playback/start/success/ratio/timeseries?from=2024-04-09T00%3A00&to=2024-04-11T00%3A00&interval=hour"})]}),"\n",(0,s.jsxs)(i.li,{children:["The response shows a ",(0,s.jsx)(i.strong,{children:"slight SPSR drop"})," for 2 consecutive hours"]}),"\n",(0,s.jsxs)(i.li,{children:["Take this time range and check if a certain country is responsible for the drop:",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(i.code,{children:"/api/v2/playback/start/success/ratio/world?from=2024-04-10T19%3A00&to=2024-04-10T21%3A00"})]}),"\n",(0,s.jsxs)(i.li,{children:["Found some countries with quite ",(0,s.jsx)(i.strong,{children:"low SPSR"})," but for the most, the playback start count / proportion is not quite high, compared to the playback start count of all countries, so they affect the ",(0,s.jsx)(i.strong,{children:"average SPSR"})," not significantly"]}),"\n",(0,s.jsxs)(i.li,{children:["To get a better view of the data repeat the request with the added URL parameter ",(0,s.jsx)(i.code,{children:"&format=csv"})]}),"\n",(0,s.jsx)(i.li,{children:"The generated .csv file can be used in Excel to obtain a compact table which offers the option of quick sorting of the countries (for example for playback starts)"}),"\n",(0,s.jsxs)(i.li,{children:["In this case Brazil shows an ",(0,s.jsx)(i.strong,{children:"inconspicuous SPSR"}),", means the customer ",(0,s.jsx)(i.strong,{children:"assertion can't be confirmed"}),", maybe they refer rather to errors after the 30 seconds after playback start, which is not considered in the SPSR metrics"]}),"\n",(0,s.jsx)(i.li,{children:"To get an idea why the SPSR is low for the selected time range, breakdown the data for a country with both qualities low SPSR and a fairly high count of playback starts / proportion: as an example Armenia would fulfill both criteria"}),"\n",(0,s.jsxs)(i.li,{children:["Get the IP breakdown of the error codes for Armenia:",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(i.code,{children:"/api/v2/playback/start/errors/countries/ip?from=2024-04-10T19%3A00&to=2024-04-10T21%3A00&countries=AM"})]}),"\n",(0,s.jsxs)(i.li,{children:["The response exhibits that almost all errors were generated by one IP, which means it is ",(0,s.jsx)(i.strong,{children:"not a general problem"})]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"filtering",children:"Filtering"}),"\n",(0,s.jsx)(i.p,{children:"The filtering section lets you discover your available filter options to refine your requests, so you can get the information that is needed."})]})}function h(e={}){const{wrapper:i}={...(0,n.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);